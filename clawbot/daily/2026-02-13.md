# 2026-02-13 (ET) — ClawBot daily log

## Focus
Driving-first execution: **Waymo multi-cam encoder pretrain → waypoint BC fine-tune → CARLA ScenarioRunner eval**.

> Note: CL #1 (morning) landed in a separate branch/PR; this log entry captures CL #2 (mid-day).

## CL #2 (mid-day): decode-in-dataset + stacked image collate (+ validity masks)

### What changed
- `training/pretrain/dataloader_episodes.py`
  - Added `decode_images` mode to `EpisodesFrameDataset` (optional) with a simple LRU cache.
  - Added `collate_batch(..., stack_images=True)` which returns per-camera dense tensors `(B,3,H,W)`.
  - Added `image_valid_by_cam` masks to indicate which frames are real vs zero-padded.
- `training/pretrain/train_ssl_stub_torch.py`
  - Switched the stub loop to rely on dataset decoding + stacked collate.
  - For now, only uses cameras that are fully valid for the batch (encoder has no masking yet).
- `training/pretrain/batch_contract.md`
  - Documented the optional decoded/stacked image fields.

### Why
- Makes the end-to-end “Waymo episodes → decoded tensors → encoder forward” path a first-class option,
  while keeping path-only plumbing available for fast iteration.
- Validity masks are the bridge to handling missing cameras cleanly in future SSL objectives.

### Follow-ups
- Teach `TinyMultiCamEncoder` to accept `(images_by_cam, valid_by_cam)` and do masked camera fusion.
- Add a minimal contrastive/temporal SSL objective that uses the masks (instead of skipping partial batches).
