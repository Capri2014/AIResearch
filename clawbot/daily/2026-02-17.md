# 2026-02-17 Daily Notes

## Pipeline PR #7

**Focus:** CARLA Closed-Loop Evaluation for Waypoint BC

### Changes

- **Added:** `training/eval/run_carla_waypoint_eval.py` - Comprehensive CARLA evaluation script
  - WaypointBCModel wrapper for loading trained checkpoints
  - ScenarioConfig for defining evaluation scenarios (weather, spawn, targets)
  - CARLAEvalMetrics for closed-loop evaluation metrics
  - Smoke test for validation without CARLA server

- **Added:** `training/eval/scenarios/default.yaml` - 5 evaluation scenarios
  - straight_clear: Straight road, clear weather
  - straight_cloudy: Straight road, cloudy weather
  - turn_clear: Turning route, clear weather
  - straight_night: Night driving scenario
  - straight_rain: Rainy conditions

### Pipeline Integration

This completes the CARLA evaluation stage of the driving-first pipeline:
```
Waymo episodes → SSL pretrain → waypoint BC → CARLA eval
```

### Usage

```bash
# Smoke test (no CARLA required)
python -m training.eval.run_carla_waypoint_eval --smoke

# Full evaluation with CARLA server
python -m training.eval.run_carla_waypoint_eval \
  --checkpoint out/sft_waypoint_bc_torch_v0/model.pt \
  --output-dir out/carla_eval_waypoint_bc
```

### Next Steps

- [ ] PR review/merge
- [ ] Run CARLA evaluation with trained checkpoint
- [ ] Compare offline ADE/FDE with closed-loop metrics
