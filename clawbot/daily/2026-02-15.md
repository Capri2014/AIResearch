# Daily Log: 2026-02-15

## Focus
Driving-first pipeline: **Waymo episodes → PyTorch SSL pretrain → waypoint BC → CARLA ScenarioRunner eval**

## Progress
- **Waypoint BC eval metrics (ADE/FDE)**: Added `training/sft/eval_waypoint_bc.py` that computes:
  - ADE (Average Displacement Error): mean L2 distance across all waypoint timesteps
  - FDE (Final Displacement Error): L2 distance at the final timestep
  - Outputs `metrics.json` (summary stats) and `predictions.jsonl` (per-frame details)
  - Supports configurable eval subset via `--eval-fraction` for rapid iteration
- **Added ADE/FDE to waypoint BC trainer**: `training/sft/train_waypoint_bc_torch_v0.py` now computes metrics during training
- **ScenarioRunner output parser**: Added `_parse_sserver_output()` to `sim/driving/carla_srunner/run_srunner_eval.py`:
  - Extracts `route_completion`, `collisions`, `offroad`, `red_light`, `comfort` metrics
  - Parses JSON result files and structured log patterns
- **RL infrastructure**: PPO delta-head + toy waypoint environment + eval metrics

## Changes Summary
- `training/sft/eval_waypoint_bc.py` - standalone eval script
- `training/sft/train_waypoint_bc_torch_v0.py` - ADE/FDE during training (+41 lines)
- `sim/driving/carla_srunner/run_srunner_eval.py` - SR output parser
- `training/rl/` - toy env, PPO delta-head, policy wrapper, checkpoint selection

## Next Steps
1. Wire Torch `WaypointPolicyTorch` into closed-loop ScenarioRunner runs
2. Add checkpoint selection based on best ADE/FDE
3. Run waypoint BC eval on trained checkpoints

## Branches
- `feature/daily-2026-02-15-a` - BC eval metrics
- `feature/daily-2026-02-15` - SR parser
- `feature/waypoint-rl-refinement` - RL infrastructure
